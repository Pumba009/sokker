budowanie projektu z ts na js:
    "npx tsc"
        (jako przypomnienie, nie trzeba uzywac npx tsc w tym projekcie)
    wystarczy uruchomic komende: 'npm run build' 
    (komende wpisujemy do konsoli w scieÅ¼ce projektu, czyli w miejscu gdzie znajduje siÄ™ plik 'package.json')


podczas budowania projektu przez vite:
    "vite build"
    vite robi bundla (kompiluje pliki ts do js, formatuje do 1 lini, zaciÄ…ga dependecies (czyli dodane importy))
    komenda "vite build", wykonywane jest kilka stepow:
        - pobierana jest konfiguracja z vite.config.ts, ustwaiamy tam:
            - do ktÃ³rego pliku ma trafic przetworzony kod (outDir)
            - jak ma wyglÄ…daÄ‡ struktura plikÃ³w w outDir (rollupOptions)
        - na podstawie konfigutacji przerabia pliki ts na js i zapisuje do folderu outDir
        - dla dynamicznych importow lub moduÅ‚ow wspÃ³Å‚dzielonych (shared modules) generowany jest folder "chunk/"
    za obslugÄ™ dynamicznych importow i moduÅ‚Ã³w wspoÅ‚. odpowiedzy jest 'Rollup'
    Rollup tworzy osobny chunk dla storage.ts, aby uniknÄ…Ä‡ powielania kodu, jeÅ›li ten plik jest uÅ¼ywany w wiÄ™cej niÅ¼ jednym entrypoint.


Co robi vite build?
Pod maskÄ…:
1. Analiza dependency graph
    Vite uÅ¼ywa Rollup do zbudowania drzewa importÃ³w z Twoich entrypointÃ³w (input).

2. Transpilacja
    TypeScript â†’ JS (tsc albo esbuild).
    JSX, TSX, itp.

3. Bundle / chunking
    Rollup Å‚Ä…czy wszystkie importy w paczki (bundle).
    JeÅ›li pliki sÄ… wspÃ³Å‚dzielone â†’ wrzuca je do chunks/.

4. Optymalizacja
    Minifikacja (Terser/Esbuild).
    Tree-shaking (usuwa nieuÅ¼ywany kod).

5. Output
    Tworzy pliki .js (entry + chunks), .css (jeÅ›li style sÄ… importowane), assets (.svg, .png).
    Do folderu dist/.


Podsumowanie:
chunks to dobra praktyka w webaplikacjach, ale w Chrome Extension czÄ™sto lepiej wyÅ‚Ä…czyÄ‡ ich generowanie, Å¼eby nie martwiÄ‡ siÄ™ o manifest


Czy chunks/ to dobra praktyka?
Tak â€” chunks sÄ… domyÅ›lnym i zalecanym mechanizmem Rollup/Vite, bo:
    - pozwalajÄ… wspÃ³Å‚dzieliÄ‡ kod miÄ™dzy entrypointami (background, content, popup),
    - unikajÄ… powielania kodu (np. jak masz tÄ™ samÄ… bibliotekÄ™ w background i popup, trafi do wspÃ³lnego chanka zamiast 2Ã—),
    - zmniejszajÄ… rozmiar plikÃ³w do pobrania.

W Chrome Extension sytuacja jest trochÄ™ inna:
    - Content scripts i background scripts Å‚adowane sÄ… niezaleÅ¼nie przez Manifest i nie mogÄ… wspÃ³Å‚dzieliÄ‡ kodu przez importy runtime (kaÅ¼dy dziaÅ‚a w sandboxie).
    - JeÅ¼eli Rollup wrzuci Ci coÅ› wspÃ³lnego do chunks/vendor-xxx.js, musisz rÄ™cznie dopisaÄ‡ ten plik do manifest.json (background.scripts albo content_scripts).

ğŸ‘‰ Dlatego w extension czÄ™sto celowo wyÅ‚Ä…cza siÄ™ dzielenie na chunk-i (Å¼eby mieÄ‡ pewnoÅ›Ä‡, Å¼e kaÅ¼dy entrypoint to jeden plik).
ğŸ‘‰ Ale jeÅ›li np. tylko popup uÅ¼ywa dodatkowego helpera (drugi entrypoint), to trzymanie tego jako osobny plik jest OK.