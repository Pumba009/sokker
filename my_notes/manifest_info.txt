

W manifest.json Å›cieÅ¼ki muszÄ… byÄ‡ relatywne wzglÄ™dem dist/, bo wÅ‚aÅ›nie ten folder Å‚adujesz jako rozszerzenie.

Jak dodac zdjÄ™cia do dist
mozna utworzyc folder public i wrzucic folder images, wtedy vite automatycznie skopiuje je do dist/images/



Manifest V3 Chrome nie obsÅ‚uguje jeszcze type: "module" dla content_scripts.

ğŸ‘‰ type: "module" dziaÅ‚a tylko dla:

background.service_worker

script type="module" w popup/HTML

RozwiÄ…zanie dla content_scripts

Bundle must be self-contained â€“ players.ts + wszystkie jego importy (constants.ts, helpery itd.) muszÄ… byÄ‡ zbite w jeden plik.
ğŸ‘‰ dziÄ™ki temu w dist/content/players.js nie ma import, tylko czysty kod.
Wszystko co znajduje siÄ™ w folderze content zostanie zbundlowane, nie tylko same importy ale tez inne pliki, np.
src>
    players.ts
    player.ts
    sotrage.ts
dist>
    tylko_1_plik_ktory_zawiera_wszystko

MoÅ¼esz to osiÄ…gnÄ…Ä‡ np. tak w vite.config.ts:
dodjac      
     manualChunks(id) {
          if (id.includes("src/content")) {
            return "players"; // wszystko z content â†’ jeden plik
          }
          
vite.config.ts:      
import { resolve } from "path";

export default {
  build: {
    rollupOptions: {
      input: {
        players: resolve(__dirname, "src/content/players.ts"),
        background: resolve(__dirname, "src/background/index.ts"),
        popup: resolve(__dirname, "src/popup/popup.ts"),
      },
      output: {
        entryFileNames: ({ name }) => {
          if (name === "players") return "content/players.js";
          if (name === "background") return "background/index.js";
          if (name === "popup") return "popup/index.js";
          return "[name].js";
        },
        // kluczowe! dla content scriptÃ³w
        manualChunks(id) {
          if (id.includes("src/content")) {
            return "players"; // wszystko z content â†’ jeden plik
          }
        },
      },
    },
  },
};